---
  - config:
    - testset: "Condenser API Tests"
    - api: &api "condenser_api"
    - variable_binds:
      - api: *api
    - generators:
      - test_id: {type: 'number_sequence', start: 1}
  
  - base_test: &base_test
    - generator_binds:
      - test_id: test_id
    - group: *api
    - url: "/"
    - method: "POST"
    - body: {template: {file: "../../templates/request_template.json"}}
    - validators:
      - extract_test: {jsonpath_mini: "error", test: "not_exists"}
      - extract_test: {jsonpath_mini: "result", test: "exists"}
      - compare: {jsonpath_mini: "id", comparator: "str_eq", expected: {template: $test_id}}
      - json_file_validator: {jsonpath_mini: "result", comparator: "json_compare", expected: {template: '5000000/$api/$method'}}

  - test:
    - name: "get_followers"
    - variable_binds:
      - method: "get_followers"
      - args: '["steemit",null,"blog",10]'
    - <<: *base_test

  - test:
    - name: "get_following"
    - variable_binds:
      - method: "get_following"
      - args: '["proskynneo",null,"blog",10]'
    - <<: *base_test

  - test:
    - name: "get_follow_count"
    - variable_binds:
      - method: "get_follow_count"
      - args: '["steemit"]'
    - <<: *base_test

  - test:
    - name: "get_content"
    - variable_binds:
      - method: "get_content"
      - args: '["steemit", "firstpost"]'
    - <<: *base_test

  - test:
    - name: "get_content_replies"
    - variable_binds:
      - method: "get_content_replies"
      - args: '["gtg", "hello-world"]'
    - <<: *base_test

# Dynamic data present
  - test:
    - name: "get_state"
    - variable_binds:
      - method: "get_state"
      - args: '["/@steemit"]'
    - <<: *base_test

  - test:
    - name: "get_trending_tags"
    - variable_binds:
      - method: "get_trending_tags"
      - args: '["steem",10]'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_trending"
    - variable_binds:
      - method: "get_discussions_by_trending"
      - args: '{"tag":"steem","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_hot"
    - variable_binds:
      - method: "get_discussions_by_hot"
      - args: '{"tag":"steem","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_promoted"
    - variable_binds:
      - method: "get_discussions_by_promoted"
      - args: '{"tag":"steem","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_created"
    - variable_binds:
      - method: "get_discussions_by_created"
      - args: '{"tag":"steem","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_blog"
    - variable_binds:
      - method: "get_discussions_by_blog"
      - args: '{"tag":"steemit","start_author":"steemit","start_permlink":"firstpost","limit":1}'
    - <<: *base_test

# can't find any params that would give nonempty results
  - test:
    - name: "get_discussions_by_feed"
    - variable_binds:
      - method: "get_discussions_by_feed"
      - args: '{"tag":"steem","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_comments"
    - variable_binds:
      - method: "get_discussions_by_comments"
      - args: '{"start_author":"admin","start_permlink":"firstpost","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_replies_by_last_update"
    - variable_binds:
      - method: "get_replies_by_last_update"
      - args: '["admin","firstpost",1]'
    - <<: *base_test

  - test:
    - name: "get_discussions_by_author_before_date"
    - variable_binds:
      - method: "get_discussions_by_author_before_date"
      - args: '{"author":"steemit","start_permlink":"firstpost","before_date":"2016-04-19T22:49:43","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_post_discussions_by_payout"
    - variable_binds:
      - method: "get_post_discussions_by_payout"
      - args: '{"tag":"polska","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_comment_discussions_by_payout"
    - variable_binds:
      - method: "get_comment_discussions_by_payout"
      - args: '{"tag":"polska","limit":1}'
    - <<: *base_test

  - test:
    - name: "get_blog"
    - variable_binds:
      - method: "get_blog"
      - args: '{"account":"steemit","start_entry_id":0,"limit":1}'
    - <<: *base_test

  - test:
    - name: "get_blog_entries"
    - variable_binds:
      - method: "get_blog_entries"
      - args: '{"account":"steemit","start_entry_id":0,"limit":1}'
    - <<: *base_test

  - test:
    - name: "get_account_reputations"
    - variable_binds:
      - method: "get_account_reputations"
      - args: '["steemit", 1]'
    - <<: *base_test

# reblogging started a bit after 5mln blocks so there can't be nonempty result here
  - test:
    - name: "get_reblogged_by"
    - variable_binds:
      - method: "get_reblogged_by"
      - args: '{"author":"steemit","permlink":"firstpost"}'
    - <<: *base_test

# No longer supported
#  - test:
#    - name: "get_account_votes"
#    - variable_binds:
#      - method: "get_account_votes"
#      - args: '["steemit"]'
#    - <<: *base_test

  - test:
      - name: "get_active_votes"
      - variable_binds:
          - method: "get_active_votes"
          - args: '["biophil","test"]'
      - <<: *base_test
