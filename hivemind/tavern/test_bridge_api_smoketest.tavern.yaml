---
  test_name: Hivemind bridge_api.get_post_header smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_post_header
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_post_header"
          params: {"author":"steemit", "permlink":"firstpost"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_discussion smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_discussion
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_discussion"
          params: {"author":"steemit", "permlink":"firstpost"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_post smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_post
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_post"
          params: {"author":"steemit", "permlink":"firstpost"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_account_posts smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_account_posts
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_account_posts"
          params: {"sort":"posts", "account":"steemit"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_ranked_posts smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_ranked_posts
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_ranked_posts"
          params: {"sort":"trending","tag":"","observer":"steemit"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_profile smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_profile
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_profile"
          params: {"account":"steemit"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_trending_topics smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_trending_topics
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_trending_topics"
          params: {}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.post_notifications smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: post_notifications
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.post_notifications"
          params: {"author":"steemit", "permlink":"firstpost"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.account_notifications smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: account_notifications
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.account_notifications"
          params: {"account":"steemit","limit":100}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.unread_notifications smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: unread_notifications
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.unread_notifications"
          params: {"account":"steemit"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_payout_stats smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: get_payout_stats
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_payout_stats"
          params: {}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.get_community smoke test

  marks:
    - smoketest
    - failing
    - xfail

  includes:
    - !include common.yaml

  stages:
    - name: get_community
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.get_community"
          params: {"name":"hive-123456", "account":"steemit"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.list_communities smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: list_communities
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.list_communities"
          params: {"limit":1}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.list_community_roles smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: list_community_roles
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.list_community_roles"
          params: {"community":"hive-123456"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.list_subscribers smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: list_subscribers
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.list_subscribers"
          params: {"community":"hive-123456"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response

---
  test_name: Hivemind bridge_api.list_all_subscriptions smoke test

  marks:
    - smoketest

  includes:
    - !include common.yaml

  stages:
    - name: list_all_subscriptions
      request:
        url: "{service.proto:s}://{service.server:s}:{service.port:d}/"
        method: POST
        headers:
          content-type: application/json
        json:
          jsonrpc: "2.0"
          id: 1
          method: "bridge.list_all_subscriptions"
          params: {"account":"steemit"}
      response:
        status_code: 200
        verify_response_with:
          function: validate_response:validate_response